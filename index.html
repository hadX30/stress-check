<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ø§Ø®ØªØ¨Ø§Ø± Ù…Ù‚ÙŠØ§Ø³ Ø§Ù„Ø¶ØºØ·</title>
  <style>
    :root{
      --bg:#0f172a; /* slate-900 */
      --card:#111827; /* gray-900 */
      --muted:#94a3b8; /* slate-400 */
      --text:#e5e7eb; /* gray-200 */
      --brand:#22d3ee; /* cyan-400 */
      --accent:#f59e0b; /* amber-500 */
      --ring: rgba(34, 211, 238, .35);
    }
    *{box-sizing:border-box}
    body{margin:0;background:linear-gradient(180deg,#0f172a, #0b1220);color:var(--text);font-family:"Tajawal",system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial}
    .container{max-width:980px;margin:auto;padding:24px}
    .card{background:linear-gradient(180deg,#0d1220, #0b1020);border:1px solid #1f2937;border-radius:20px;box-shadow:0 10px 35px rgba(0,0,0,.35)}
    header{padding:24px 24px 0;text-align:center}
    .title{font-size:28px;font-weight:800;letter-spacing:.3px}
    .subtitle{color:var(--muted);margin-top:6px}
    .section{padding:20px 24px 28px}
    .grid{display:grid;grid-template-columns:1fr;gap:14px}
    @media(min-width:720px){.grid{grid-template-columns:1fr 1fr}}
    fieldset{border:1px solid #253049;border-radius:16px;padding:14px;background:#0a1222}
    legend{padding:0 8px;font-weight:700;color:#e2e8f0}
    .q{display:flex;flex-direction:column;gap:12px}
    .q-label{font-weight:700}
    .scale{display:grid;grid-template-columns:repeat(5,1fr);gap:8px}
    .opt{position:relative}
    .opt input{position:absolute;inset:0;opacity:0}
    .opt .btn{display:block;text-align:center;padding:10px;border:1px solid #2b3851;border-radius:12px;background:#0c1730;color:#cbd5e1;font-weight:700;user-select:none}
    .opt input:focus-visible + .btn{outline:2px solid var(--ring)}
    .opt input:checked + .btn{border-color:var(--brand);box-shadow:0 0 0 3px rgba(34,211,238,.15) inset;color:#e5feff}
    .scale small{display:block;color:#8da2c0;margin-top:6px;text-align:center}
    .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    button.action{appearance:none;border:1px solid #2b3851;background:#0b1324;color:#e2e8f0;border-radius:12px;padding:10px 14px;font-weight:800;cursor:pointer}
    button.primary{border-color:var(--brand);background:#0e1f36}
    .result{margin-top:18px;border:1px dashed #2b3851;border-radius:14px;padding:14px;background:#0a1428}
    .meter{height:10px;border-radius:999px;background:#19233a;overflow:hidden;margin:10px 0 8px}
    .bar{height:100%;width:0;background:linear-gradient(90deg,#22c55e,#f59e0b,#ef4444);transition:width .4s ease}
    .muted{color:var(--muted)}
    .hint{font-size:14px;color:#a8b2c3}
    .badge{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:999px;border:1px solid #2b3851;background:#0b142a}
    .footer-note{color:#9aa7bb;font-size:13px;margin-top:8px}
    .hidden{display:none}
    .test-pass{color:#22c55e;font-weight:700}
    .test-fail{color:#ef4444;font-weight:700}
      /* FX layer behind the form */
    .card{position:relative; overflow:hidden}
    #bgFX{position:absolute; inset:0; z-index:0; pointer-events:none; opacity:.6; filter:saturate(110%)}
    .layer-fore{position:relative; z-index:1}
  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <canvas id="bgFX" aria-hidden="true"></canvas>
      <header class="layer-fore">
        <div class="title">Ø§Ø®ØªØ¨Ø§Ø± Ù…Ù‚ÙŠØ§Ø³ Ø§Ù„Ø¶ØºØ·</div>
        <p class="subtitle">Ø§Ø¹Ø±Ù Ù‚Ø¯ Ø§ÙŠØ´ Ø§Ù„Ø´ØºÙ„ Ø­Ø§Ø±Ù‚ Ù…Ø®Ùƒ</p>
        <p class="inst muted">Ø§Ø®ØªØ± Ù„ÙƒÙ„ Ø¹Ø¨Ø§Ø±Ø©: <strong>Ø£Ø¨Ø¯Ù‹Ø§ (0)</strong>ØŒ <strong>Ù†Ø§Ø¯Ø±Ù‹Ø§ (1)</strong>ØŒ <strong>Ø£Ø­ÙŠØ§Ù†Ù‹Ø§ (2)</strong>ØŒ <strong>ÙƒØ«ÙŠØ± (3)</strong>ØŒ <strong>Ø¯Ø§ÙŠÙ… (4)</strong>. Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø¨ØªØ·Ù„Ø¹ ØªØ­Øª Ø£ÙˆÙ„ Ù…Ø§ ØªØ®ØªØ§Ø± Ø£ÙŠ Ø¥Ø¬Ø§Ø¨Ø©.</p>
      </header>

      <!-- Full Scale (no storage, no name) -->
      <section class="section layer-fore">
        <div id="questions" class="grid" aria-live="polite"></div>
        <div class="actions">
          <button class="action primary" id="calcFull">Ø§Ø­Ø³Ø¨ Ø§Ù„Ù†ØªÙŠØ¬Ø©</button>
          <span class="badge" id="answeredBadge">Ø£Ø¬Ø¨Øª 0/21</span>
        </div>
        <div class="result hidden" id="fullResult" aria-live="polite">
          <div class="hint">Ù†ØªÙŠØ¬ØªÙƒ</div>
          <div class="meter"><div class="bar" id="barFull"></div></div>
          <div><strong id="scoreFull">â€”</strong> Ù…Ù† <span id="maxFull">â€”</span> â€¢ <span id="labelFull">â€”</span></div>
          <ul id="tipsFull" style="margin:10px 0 0 18px"></ul>
          <div class="footer-note">ØªÙ†Ø¨ÙŠÙ‡: Ù…Ù‚ÙŠØ§Ø³ ØªÙˆØ¹ÙˆÙŠ ÙˆÙ„ÙŠØ³ ØªØ´Ø®ÙŠØµÙ‹Ø§ Ø·Ø¨ÙŠÙ‹Ø§. Ù„Ùˆ Ø§Ù„Ø£Ø¹Ø±Ø§Ø¶ Ù…Ø¤Ø«Ø±Ø© Ø¹Ù„Ù‰ ØµØ­ØªÙƒ Ù„ÙØªØ±Ø©ØŒ Ø§Ø³ØªØ´Ø± Ù…Ø®ØªØµ.</div>
        </div>
      </section>

      <!-- Dev self-tests -->
      <section class="section layer-fore">
        <button class="action" id="runTests">ØªØ´ØºÙŠÙ„ Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø°Ø§ØªÙŠØ©</button>
        <div class="result hidden" id="testResult">
          <div class="hint">Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª</div>
          <ul id="testList" style="margin:10px 0 0 18px"></ul>
        </div>
      </section>
    </div>
  </div>

  <script>
    // ===== Data =====
    const fullQuestions = [
      "ØªØµØ­Ù‰ ÙˆØªÙ…Ø³Ùƒ Ø§Ù„Ø¬ÙˆØ§Ù„ ØªØ´ÙŠÙƒ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„Ø§Øª Ù‚Ø¨Ù„ Ø­ØªÙ‰ Ù…Ø§ ØªØºØ³Ù„ ÙˆØ¬Ù‡ÙƒØŸ",
      "Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù‡Ø§Ù… ÙÙŠ ÙŠÙˆÙ…Ùƒ ÙŠØ­Ø³Ù‘Ø³Ùƒ Ø¥Ù† ØªÙ‚ÙˆÙŠÙ…Ùƒ \"Ù‚Ø±ÙˆØ¨ Ø¹Ø§Ø¦Ù„Ø©\" Ù…Ø§ ÙŠØ³ÙƒÙ‘ØªØŸ",
      "ÙŠÙˆÙ…Ùƒ ÙƒÙ„Ù‡ Ø§Ø¬ØªÙ…Ø§Ø¹Ø§Øªâ€¦ ÙˆØªØ´ØªØºÙ„ Ø¨Ø¹Ø¯ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ Ø¹Ù„Ù‰ Ø§Ù„Ù„ÙŠ ÙƒØ§Ù† Ø§Ù„Ù…ÙØ±ÙˆØ¶ ÙŠØªØ³ÙˆÙ‘Ù‰ Ù‚Ø¨Ù„Ù‡ØŸ",
      "ØªØ´ØªØºÙ„ Ø¨Ø¹Ø¯ Ø§Ù„Ø¯ÙˆØ§Ù… Ø¨Ø¯ÙˆÙ† ØªØ¹ÙˆÙŠØ¶ ÙˆØªÙ‚ÙˆÙ„: \"Ø¢Ø®Ø± Ù…Ø±Ø© Ø¨Ø³\"ØŸ",
      "ØªØ±Ø¯ Ø¹Ù„Ù‰ Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø´ØºÙ„ ÙÙŠ Ø§Ù„ÙˆÙŠÙƒÙ†Ø¯ ÙˆÙƒØ£Ù†Ùƒ \"24/7 Ø®Ø¯Ù…Ø© Ø¹Ù…Ù„Ø§Ø¡\"ØŸ",
      "ØªØ­Ø³ Ø¨Ø§Ù„Ø°Ù†Ø¨ Ø¥Ø°Ø§ Ø®Ø°Øª Ø¨Ø±ÙŠÙƒ Ù‚ØµÙŠØ± Ø£Ùˆ Ù‚ÙÙ„Øª Ø¥Ø´Ø¹Ø§Ø±Ø§ØªÙƒØŸ",
      "Ù†ÙˆÙ…Ùƒ ÙŠØªÙ„Ø®Ø¨Ø·/ØªØµØ­Ù‰ ØªÙÙƒØ± ÙÙŠ ØªØ³Ù„ÙŠÙ…Ø§Øª Ø§Ù„Ø´ØºÙ„ØŸ",
      "ÙˆØ¬Ø¨Ø§ØªÙƒ ØªØªØ£Ø®Ø± Ø£Ùˆ ØªØªÙ„ØºÙ‰ Ø¨Ø³Ø¨Ø¨ Ø§Ù„Ø²Ø­Ù…Ø©ØŸ",
      "ÙŠØ¬ÙŠÙƒ ØµØ¯Ø§Ø¹/Ø´Ø¯ ÙƒØªÙ Ø¢Ø®Ø± Ø§Ù„ÙŠÙˆÙ… ØºØ§Ù„Ø¨Ù‹Ø§ Ø¨Ø³Ø¨Ø¨ Ø§Ù„Ø´ØºÙ„ØŸ",
      "ØµØ±Øª ØªØªÙ†Ø±ÙØ² Ø£Ùˆ ØªØªØ¶Ø§ÙŠÙ‚ Ø¨Ø³Ø±Ø¹Ø© Ø£ÙƒØ«Ø± Ù…Ù† Ø£ÙˆÙ„ØŸ",
      "ØªØ­Ø³ Ø£Ù†Ùƒ ØªØ³ÙˆÙŠ Ø´ØºÙ„ Ù…Ùˆ Ø¶Ù…Ù† ÙˆØµÙÙƒ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ Ø£ØºÙ„Ø¨ Ø§Ù„ÙˆÙ‚ØªØŸ",
      "ØªÙ‚ÙˆÙ„ \"Ø¥ÙŠÙ‡\" Ù„Ø´ØºÙ„ Ø¥Ø¶Ø§ÙÙŠ ÙˆØ£Ù†Øª Ø¹Ø§Ø±Ù Ø¥Ù† Ø¬Ø¯ÙˆÙ„Ùƒ ÙÙ„â€¦ Ù„Ø£Ù†Ùƒ Ù…Ø§ ÙˆØ¯Ùƒ ØªØ²Ø¹Ù„ Ø£Ø­Ø¯ØŸ",
      "Ø¥Ø´Ø¹Ø§Ø±Ø§ØªÙƒ Ù…Ø§ ØªÙˆÙ‚Ù: Ø¥ÙŠÙ…ÙŠÙ„ØŒ ØªÙŠÙ…Ø²ØŒ ÙˆØ§ØªØ³Ø§Ø¨â€¦ ÙˆÙƒÙ„Ù‡Ø§ \"Ù…Ù‡Ù…Ø©\"ØŸ",
      "ØªØ±Ø¬Ø¹ ØªØ¹Ø¯Ù‘Ù„ Ù†ÙØ³ Ø§Ù„Ù…Ù‡Ù…Ø© ÙƒØ«ÙŠØ± Ù„Ø£Ù†Ùƒ Ù…Ø«Ø§Ù„ÙŠ Ø²ÙŠØ§Ø¯Ø© Ø¹Ù† Ø§Ù„Ù„Ø²ÙˆÙ…ØŸ",
      "Ø§Ù„Ø´ØºÙ„ ÙŠØ¯Ø®Ù„ Ø¹Ù„Ù‰ ÙˆÙ‚ØªÙƒ Ù…Ø¹ Ø£Ù‡Ù„Ùƒ/Ù†ÙØ³ÙƒØŒ ÙˆØ­ØªÙ‰ Ø§Ù„Ù‡ÙˆØ§ÙŠØ§Øª ØµØ§Ø± Ù„Ù‡Ø§ ØºØ¨Ø§Ø±ØŸ",
      "ÙŠØ®ÙˆÙÙƒ ØªÙÙˆÙŠØ¶ Ø§Ù„Ù…Ù‡Ø§Ù… Ù„Ø£Ù†Ùƒ ØªØ­Ø³ ÙƒÙ„ Ø´ÙŠ \"Ø¹Ù„Ù‰ Ø±Ù‚Ø¨ØªÙŠ\"ØŸ",
      "Ø¹Ù†Ø¯Ùƒ ØªØ³Ù„ÙŠÙ…Ø§Øª Ù…ØªØ±Ø§ÙƒÙ…Ø©ØŒ ÙˆØªØ¤Ø¬Ù„ Ø£ØµØ¹Ø¨ Ù…Ù‡Ù…Ø© Ù„Ø¢Ø®Ø± Ø§Ù„ÙŠÙˆÙ…ØŸ",
    
    ];

    const labels = ["Ø£Ø¨Ø¯Ù‹Ø§ (0)", "Ù†Ø§Ø¯Ø±Ù‹Ø§ (1)", "Ø£Ø­ÙŠØ§Ù†Ù‹Ø§ (2)", "ÙƒØ«ÙŠØ± (3)", "Ø¯Ø§ÙŠÙ… (4)"];

    // ===== Helpers =====
    const el = sel => document.querySelector(sel);
    const els = sel => Array.from(document.querySelectorAll(sel));

    function makeScale(name){
      const wrap = document.createElement('div');
      wrap.className = 'scale';
      labels.forEach((lab, i)=>{
        const opt = document.createElement('label');
        opt.className = 'opt';
        opt.innerHTML = `
          <input type="radio" name="${name}" value="${i}" aria-label="${lab}" />
          <span class="btn">${i}</span>
          <small>${lab.split(' ')[0]}</small>
        `;
        wrap.appendChild(opt);
      });
      return wrap;
    }

    function renderFull(){
      const box = el('#questions');
      fullQuestions.forEach((q, i)=>{
        const fs = document.createElement('fieldset');
        const lg = document.createElement('legend');
        lg.textContent = `Ø³${i+1}`;
        fs.appendChild(lg);
        const div = document.createElement('div');
        div.className = 'q';
        const p = document.createElement('div');
        p.className = 'q-label';
        p.textContent = q;
        div.appendChild(p);
        div.appendChild(makeScale('q'+i));
        fs.appendChild(div);
        box.appendChild(fs);
      });
    }

    function fillTips(selector, tips){
      const ul = el(selector); ul.innerHTML = '';
      tips.forEach(t=>{ const li = document.createElement('li'); li.textContent = t; ul.appendChild(li); });
    }

    function interpretFull(score){
      if(score <= 20) return {label:'ÙˆØ¶Ø¹Ùƒ Ø·ÙŠØ¨ ğŸ‘', tips:[
        'Ø§Ø³ØªÙ…Ø± Ø¹Ù„Ù‰ ØªØ±ØªÙŠØ¨ Ø£ÙˆÙ„ÙˆÙŠØ§ØªÙƒ (3 Ù…Ù‡Ø§Ù… ÙƒØ¨ÙŠØ±Ø© Ù„Ù„Ø£Ø³Ø¨ÙˆØ¹ØŒ 3 ØµØºÙŠØ±Ù‡ Ù„Ù„ÙŠÙˆÙ…).',
        'Ø«Ø¨Ù‘Øª Ø¨Ø±ÙŠÙƒ Ù‚ØµÙŠØ± ÙƒÙ„ 90 Ø¯Ù‚ÙŠÙ‚Ø©.',
        'Ø®Ù„Ù‘ Ù‡Ø§ØªÙÙƒ ØµØ§Ù…Øª Ø¨ÙˆÙ‚Øª Ø§Ù„ØªØ±ÙƒÙŠØ².'
      ]};
      if(score <= 44) return {label:'Ø¶ØºØ· Ø®ÙÙŠÙâ€“Ù…ØªÙˆØ³Ø· âš ï¸', tips:[
        'Ø­Ø¯Ø¯ Ø³Ø§Ø¹ØªÙŠÙ† ØµØ§Ù…ØªØ© ÙŠÙˆÙ…ÙŠÙ‹Ø§ Ø¨Ù„Ø§ Ø§Ø¬ØªÙ…Ø§Ø¹Ø§Øª/Ø¥Ø´Ø¹Ø§Ø±Ø§Øª.',
        'Ù‚Ù„Ù‘Ù„ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ Ø®Ø§Ø±Ø¬ ÙˆØµÙÙƒ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ Ø£Ùˆ Ø¬Ø¯ Ù„Ù‡Ø§ Ù…Ø§Ù„Ùƒ ÙˆØ§Ø¶Ø­.',
        'Ù„Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ù‚ØµÙŠØ±Ø©: Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¯Ù‚ÙŠÙ‚ØªÙŠÙ† â€“ Ø®Ù„ØµÙ‡Ø§ ÙÙˆØ±Ù‹Ø§.'
      ]};
      if(score <= 66) return {label:'Ø¶ØºØ· Ø¹Ø§Ù„ÙŠ ğŸš¨', tips:[
        'ÙÙˆÙ‘Ø¶ Ù…Ù‡Ù…Ø© ÙˆØ§Ø­Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ ÙŠÙˆÙ…ÙŠÙ‹Ø§ Ø¨ÙˆØ¶ÙˆØ­.',
        'Ù‚Ù„ Ù„Ø§ Ø¨Ø´ÙƒÙ„ Ù…Ù‡Ø°Ø¨: "Ø£Ø¨Ø¯Ø£ Ø¨Ø¹Ø¯ ØªØ³Ù„ÙŠÙ… X" Ø£Ùˆ "Ù…ÙŠÙ† Ù…Ù†Ø§Ø³Ø¨ ÙŠØ³Ø§Ø¹Ø¯ØŸ"',
        'Ø¶Ø¨Ø· Ø­Ø¯ÙˆØ¯ Ø¨Ø¹Ø¯ Ø§Ù„Ø¯ÙˆØ§Ù… (Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª + Ø±Ø³Ø§Ù„Ø© Ø­Ø§Ù„Ø©).'
      ]};
      return {label:'Ø¥Ù†Ø°Ø§Ø± Ø§Ø­ØªØ±Ø§Ù‚ ÙˆØ¸ÙŠÙÙŠ ğŸ”¥', tips:[
        'Ù†Ø§Ù‚Ø´ Ø§Ù„Ø£Ø­Ù…Ø§Ù„ Ù…Ø¹ Ø§Ù„Ù…Ø¯ÙŠØ± ÙˆØ­Ø¯Ø¯ Ø£ÙˆÙ„ÙˆÙŠØ§Øª ØµØ§Ø±Ù…Ø©.',
        'Ø±ØªÙ‘Ø¨ Ø¥Ø¬Ø§Ø²Ø© Ù‚ØµÙŠØ±Ø© ÙØ¹Ù„ÙŠØ© Ø¨Ø¯ÙˆÙ† Ø´ØºÙ„.',
        'Ø§Ø·Ù„Ø¨ Ø¯Ø¹Ù… Ù…Ù† Ù…Ø®ØªØµ Ø¥Ø°Ø§ Ø£Ø«Ù‘Ø± Ø¹Ù„Ù‰ Ù†ÙˆÙ…Ùƒ/ØµØ­ØªÙƒ.'
      ]};
    }

    function calc(){
      const totalQs = fullQuestions.length;
      const checked = els('input[name^=q]:checked');
      const sum = checked.reduce((a, r)=>a + Number(r.value), 0);
      el('#scoreFull').textContent = sum;
      el('#answeredBadge').textContent = `Ø£Ø¬Ø¨Øª ${checked.length}/${totalQs}`;
      el('#maxFull').textContent = totalQs * 4;
      const pct = (sum / (totalQs*4)) * 100;
      el('#barFull').style.width = pct + '%';
      const {label, tips} = interpretFull(sum);
      el('#labelFull').textContent = label;
      fillTips('#tipsFull', tips);
    }

    // ===== Simple test utilities =====
    function computeLabelForScore(s){ return interpretFull(s).label; }
    function expect(name, cond){
      const li = document.createElement('li');
      li.innerHTML = cond ? `<span class="test-pass">âœ”</span> ${name}` : `<span class="test-fail">âœ–</span> ${name}`;
      el('#testList').appendChild(li);
      return cond;
    }
    function runSelfTests(){
      el('#testList').innerHTML='';
      // Boundaries for 21 Ø£Ø³Ø¦Ù„Ø© => Ø§Ù„Ù…Ø¯Ù‰ 0â€“84
      const ok0 = expect('Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© = 21', fullQuestions.length === 21);
      const ok1 = expect('0 Ù†Ù‚Ø·Ø© â‡’ ÙˆØ¶Ø¹Ùƒ Ø·ÙŠØ¨', computeLabelForScore(0).includes('ÙˆØ¶Ø¹Ùƒ Ø·ÙŠØ¨'));
      const ok2 = expect('20 Ù†Ù‚Ø·Ø© â‡’ ÙˆØ¶Ø¹Ùƒ Ø·ÙŠØ¨', computeLabelForScore(20).includes('ÙˆØ¶Ø¹Ùƒ Ø·ÙŠØ¨'));
      const ok3 = expect('21 Ù†Ù‚Ø·Ø© â‡’ Ø¶ØºØ· Ø®ÙÙŠÙâ€“Ù…ØªÙˆØ³Ø·', computeLabelForScore(21).includes('Ø¶ØºØ· Ø®ÙÙŠÙâ€“Ù…ØªÙˆØ³Ø·'));
      const ok4 = expect('44 Ù†Ù‚Ø·Ø© â‡’ Ø¶ØºØ· Ø®ÙÙŠÙâ€“Ù…ØªÙˆØ³Ø·', computeLabelForScore(44).includes('Ø¶ØºØ· Ø®ÙÙŠÙâ€“Ù…ØªÙˆØ³Ø·'));
      const ok5 = expect('45 Ù†Ù‚Ø·Ø© â‡’ Ø¶ØºØ· Ø¹Ø§Ù„ÙŠ', computeLabelForScore(45).includes('Ø¶ØºØ· Ø¹Ø§Ù„ÙŠ'));
      const ok6 = expect('66 Ù†Ù‚Ø·Ø© â‡’ Ø¶ØºØ· Ø¹Ø§Ù„ÙŠ', computeLabelForScore(66).includes('Ø¶ØºØ· Ø¹Ø§Ù„ÙŠ'));
      const ok7 = expect('67 Ù†Ù‚Ø·Ø© â‡’ Ø¥Ù†Ø°Ø§Ø± Ø§Ø­ØªØ±Ø§Ù‚ ÙˆØ¸ÙŠÙÙŠ', computeLabelForScore(67).includes('Ø¥Ù†Ø°Ø§Ø± Ø§Ø­ØªØ±Ø§Ù‚'));
      const ok8 = expect('84 Ù†Ù‚Ø·Ø© â‡’ Ø¥Ù†Ø°Ø§Ø± Ø§Ø­ØªØ±Ø§Ù‚ ÙˆØ¸ÙŠÙÙŠ', computeLabelForScore(84).includes('Ø¥Ù†Ø°Ø§Ø± Ø§Ø­ØªØ±Ø§Ù‚'));

      // Ø¸Ù‡ÙˆØ± Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø¨Ø¹Ø¯ Ø£ÙˆÙ„ Ø§Ø®ØªÙŠØ§Ø±
      const resBox = el('#fullResult');
      resBox.classList.add('hidden');
      const first = el('input[name=q0][value="0"]');
      first.checked = true;
      first.dispatchEvent(new Event('change', {bubbles:true}));
      const t1 = expect('Ø§Ù„Ù†ØªÙŠØ¬Ø© ØªØ¸Ù‡Ø± Ø¨Ø¹Ø¯ Ø£ÙˆÙ„ Ø§Ø®ØªÙŠØ§Ø±', resBox.classList.contains('hidden') === false);

      // Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª ÙŠØ²ÙŠØ¯
      const t2 = expect('Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª â‰¥ 1', /Ø£Ø¬Ø¨Øª\s+(\d+)/.exec(el('#answeredBadge').textContent)[1] >= 1);

      const tfx = expect('Ø·Ø¨Ù‚Ø© Ø§Ù„Ù…Ø¤Ø«Ø±Ø§Øª Ù…ÙˆØ¬ÙˆØ¯Ø©', !!document.getElementById('bgFX'));
      el('#testResult').classList.remove('hidden');
      return [ok0,ok1,ok2,ok3,ok4,ok5,ok6,ok7,ok8,t1,t2,tfx].every(Boolean);
    }
    // ===== FX (interactive background) =====
    (function(){
      const canvas = document.getElementById('bgFX');
      if(!canvas) return;
      const card = document.querySelector('.card');
      const ctx = canvas.getContext('2d');
      // Ù†Ø¹Ù„Ù† Ù†ÙˆØ¹ Ø§Ù„Ù…Ø¤Ø«Ø±Ø§Øª Ø¹Ø´Ø§Ù† Ù†Ø®ØªØ¨Ø±Ù‡ Ø°Ø§ØªÙŠÙ‹Ø§
      window.__FX_TYPE = 'emoji';

      const state = {
        W:0, H:0,
        dpi: Math.max(1, window.devicePixelRatio||1),
        particles: [],
        parallax:{x:0,y:0},
        reduce: window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches
      };

      const EMOJIS = ['ğŸ”¥','â°','ğŸ§¨','â³','ğŸ‘©â€ğŸ’»','ğŸ§‘â€ğŸ’»','ğŸ‘©â€ğŸ“','ğŸ§‘â€ğŸ“','ğŸ’¼'];
      const GLOWS  = [
        'rgba(251,113,133,0.65)', // rose-400
        'rgba(245,158,11,0.65)',  // amber-500
        'rgba(34,211,238,0.65)',  // cyan-400
        'rgba(167,139,250,0.65)', // violet-400
        'rgba(52,211,153,0.65)'   // emerald-400
      ];
      const rnd=(a,b)=>Math.random()*(b-a)+a;

      function resize(){
        const r = card.getBoundingClientRect();
        state.W = Math.max(1, Math.floor(r.width));
        state.H = Math.max(1, Math.floor(r.height));
        canvas.width = state.W*state.dpi;
        canvas.height = state.H*state.dpi;
        canvas.style.width = state.W+'px';
        canvas.style.height = state.H+'px';
        ctx.setTransform(state.dpi,0,0,state.dpi,0,0);
      }

      function make(){
        return {
          x:rnd(0,state.W), y:rnd(0,state.H),
          vx:rnd(-.12,.12), vy:rnd(-.42,-.15),
          s:rnd(18,36), rot:rnd(0,Math.PI*2), vr:rnd(-.01,.01),
          g: EMOJIS[Math.floor(rnd(0,EMOJIS.length))],
          glow: GLOWS[Math.floor(rnd(0,GLOWS.length))],
          a:rnd(.55,.95)
        };
      }

      function draw(p){
        ctx.save();
        const px = p.x + state.parallax.x*(p.s/36);
        const py = p.y + state.parallax.y*(p.s/36);
        ctx.translate(px,py);
        ctx.rotate(p.rot);
        ctx.globalAlpha = p.a;
        // Ù‡Ø§Ù„Ø© Ù…ØªÙˆÙ‡Ø¬Ø© Ø®Ù„Ù Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ
        const r = p.s*1.6;
        const grad = ctx.createRadialGradient(0,0,r*0.2, 0,0, r);
        grad.addColorStop(0, p.glow);
        grad.addColorStop(1, 'rgba(0,0,0,0)');
        ctx.fillStyle = grad;
        ctx.beginPath(); ctx.arc(0,0,r,0,Math.PI*2); ctx.fill();
        // Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ Ù†ÙØ³Ù‡ Ù…Ø¹ Ø¸Ù„ Ù…ØªÙˆÙ‡Ø¬
        ctx.shadowColor = p.glow; ctx.shadowBlur = 18;
        ctx.textAlign='center'; ctx.textBaseline='middle';
        ctx.font = `${Math.round(p.s*1.6)}px "Apple Color Emoji","Segoe UI Emoji","Noto Color Emoji","EmojiOne","Twemoji","sans-serif"`;
        ctx.fillText(p.g, 0, 0);
        ctx.shadowBlur = 0;
        ctx.restore();
      }

      function step(){
        ctx.clearRect(0,0,state.W,state.H);
        for(const p of state.particles){
          p.x += p.vx; p.y += p.vy; p.rot += p.vr;
          if(p.y < -40) { p.y = state.H + 40; p.x = rnd(0,state.W); }
          if(p.x < -40) p.x = state.W + 40; else if(p.x > state.W+40) p.x = -40;
          draw(p);
        }
        if(!state.reduce) requestAnimationFrame(step);
      }

      function burst(x,y){
        for(let i=0;i<12;i++){
          const p = make(); p.x=x; p.y=y;
          p.vx=rnd(-1.2,1.2); p.vy=rnd(-1.6,-.3); p.s=rnd(20,34);
          state.particles.push(p);
        }
      }

      function onMove(e){
        const r=card.getBoundingClientRect();
        const mx=e.clientX - r.left, my=e.clientY - r.top;
        state.parallax.x=(mx - state.W/2)*0.05;
        state.parallax.y=(my - state.H/2)*0.05;
      }
      function onClick(e){ const r=card.getBoundingClientRect(); burst(e.clientX-r.left, e.clientY-r.top); }

      function init(){
        resize();
        state.particles = [];
        const N = Math.min(70, Math.max(35, Math.floor(state.W*state.H/11000)));
        for(let i=0;i<N;i++) state.particles.push(make());
        step();
      }

      window.addEventListener('resize', resize);
      card.addEventListener('mousemove', onMove);
      card.addEventListener('click', onClick);
      init();
    })();

    // ===== Init =====
    renderFull();
    calc();

    // Events
    el('#calcFull').addEventListener('click', ()=>{ el('#fullResult').classList.remove('hidden'); calc(); });
    el('#questions').addEventListener('change', (e)=>{
      if(e.target && e.target.matches('input[type="radio"]')){
        el('#fullResult').classList.remove('hidden');
        calc();
      }
    });
    el('#runTests').addEventListener('click', runSelfTests);

    // Optional: autorun tests once on load (log to console only)
    (function(){
      const passed = runSelfTests();
      console.log('Self-tests passed:', passed);
    })();
  </script>
</body>
</html>
